
## Data dictionary

| Variable Name                                                                                                                                                                                          | Description                                                                                                       | Notes                                                                                                                                                                |                                                                                                                                                                                                                                       |                                                                                                                             | 
|---|---|---|---|---| 
| `ApplicationSerialNumber`                                                                                                                                                                       | Clipper card number                                                                                          |                                                                                                                                         |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `ApplicationTransactionSequenceNumber`                                                                                                                                                            | Incremented count of transactions                                                     | Includes fare transactions and add value transactions                                        | Initialized at 1                                                                                                                                                                                                                         |                                                                                                                                   | 
| `GenerationTime`                                                                                                                                                                                  | UTC Time: Time of transaction                                                                                                                                                                                                                     | [Subtract 8 hours (or 7 in the summer) to get local time](https://github.com/BayAreaMetro/clpr/blob/master/inst/sql/day_fares.sql#L4)                                                                                                                                                                                     | [Subtract 11 hours (or 10 in the summer) to get the date of service](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L67-L70)    | [Subtract generation times to get trip time for dual tag transactions](https://github.com/BayAreaMetro/clpr/blob/master/R/complete_trip.R#L10) 
| `OperatorID`                                                                                                                                                                                    | Operator                                                   | [Decoded in Participant parameter table](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L53-L54)                                                                                                                                                                      |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `RecordType`                                                                                                                                                                                      |                                                       | Always 1                                                                                                                                                                      |                                                                                                                                                                                                                                            |                                                                                                                                   | 
| `Subtype`                                                                                                                                                                                        | From 1-6: Tag system description | <ol><li>Single tag</li><li>Zone-based dual tag entry</li><li>Zone-based dual tag exit</li><li>Location-specific dual tag entry</li><li>Location-specific dual tag exit</li><li>Location-specific single tag</li></ol>                                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `Purse Balance`                                                                                                                                                                                 | eCash Balance                                                                                 |                                                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `PurseAmount`                                                                                                                                                                                    | Amount deducted from purse based on subtype (except HVD BART)                                                   | <ol><li>Flat fare deducted</li><li>Entry: Maximum zone fare deducted</li><li>Exit: [Maximum minus actual fare *refunded*](https://github.com/BayAreaMetro/clpr/blob/master/R/complete_trip.R#L22)</li><li>Entry: No deduction</li><li>Exit: Fare deducted</li><li>Location-specific fare deducted</li></ol> |  |                                                                                                                                   | 
| `RideAnnulled`                                                                                                                                                                                 | Boolean: 1 if refund issued                                                                                      |                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `StartTime`                                                                                                                                                                                      | UTC Time: Time trip began                                                                                              | Entry time for a trip |                                                                                                                                                           |                                                                                                                                   | 
| `RouteID` 	| Route                                                                                                             |  [Decoded in Route parameter table](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L55-L56)			                                                                                                                                                                        |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `ContractID`	| Passes/products to serve as alternate forms of payment| [Decoded in Product map parameter table](https://github.com/BayAreaMetro/clpr/blob/master/R/products.R#L13-L25)                                                                                                                                          |                                                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `GenericECashPurseBalance`                                                                                                                                                                      | Purse Balance (BART HVD Only)                                                                                                   |                                                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `GenericECashPurseAmount`                                                                                                                                                                         | Purse Amount (BART HVD Only)                                                                                                     |                                                                                                                                              |                                                                                                                                                                              |                                                                                                                                   | 
| `OriginLocation`                                                                                                                                                                               | Station or Zone: trip origin                                                                                                                                                     | [Decoded in Location parameter table](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L57-L58)                                                                                                                                                                                                                                            |                                                                                                                                   | 
| `DestinationLocation`                                                                                                                                                                            | Station or Zone: trip destination                                   | [Decoded in Location parameter table](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L57-L58)                                                                            | defaults to 65535 if unknown                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `TransferOperator`                                                                                                                                                                            | Previous transit operator within 2 hours if applicable                                   |                                                                          |                                                                                                                                                                                                                                              |                                                                                                                                   | 
| `TransferDiscountFlag`                                                                                                                                                                            | Transfer Indicator                                   | 1 if discount given for transferring from previous operator                                                                           |                                                                                                                                                                                                                                              |                                                                                                                                   | 
| `ProductCategory`                                                                                                                                                                                | Type of fare payment product                                                                                 | eCash vs Product vs Ridebook                                                                                                                                                                    |                                                                                                                                                                                                                                             |                                                                                                                                   | 
| `InstitutionID`                                                                                                                                                                                | Designated groups for whom transit operator provides cards                                                                                |                                                                                                                                                                       |                                                                                                                                                                                                                                             |                                                                                                                                   | 




## Notes



* Berkeley institution ID's don't go into effect on this table until August 1, 2017



